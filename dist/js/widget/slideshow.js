!function(a,b,c){"function"==typeof define&&define.amd?define(c):"undefined"!=typeof module&&module.exports?module.exports=c():b[a]=c()}("Slideshow",this,function(){var a=function(a){this.target=a,this.runner=a.children[0],this.frames=a.children[0].children,this.current||this._init()};return a.prototype._init=function(){var a=this;this.current=0,this.maximum=this.frames.length-1,this.linkNext=document.createElement("a"),this.linkPrev=document.createElement("a"),this.linkNext.className=this.linkNext.innerHTML="next",this.linkPrev.className=this.linkPrev.innerHTML="prev",this.linkNext.onclick=function(){return a.to(a.current+1,!0),!1},this.linkPrev.onclick=function(){return a.to(a.current-1,!0),!1},this.target.appendChild(this.linkNext),this.target.appendChild(this.linkPrev);var b=function(){var a,b,c,d=document.body.style,e=["ms","moz","webkit"];if("transition"in d)c="";else for(a=0,b=e.length;b>a;a++)if(e[a]+"Transition"in d){c=e[a];break}return c}();this.transitionEnd=function(){var a;return"string"==typeof b&&(a=b.length?b+"TransitionEnd":"transitionend"),a}(),this.transitionEnd&&(this.transitionEndHandler=function(){a.timeout&&a._autoplay()},this.target.addEventListener(this.transitionEnd,this.transitionEndHandler,!0)),this.to(this.current),this._autoplay()},a.prototype._autoplay=function(){var a=this,b=this.current+1;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){a.to(b)},5e3)},a.prototype._loop=function(a){return a>this.maximum?a=0:0>a&&(a=this.maximum),a},a.prototype.to=function(a,b){a=this._loop(a),this.frames[a]&&(b&&this.timeout&&(clearTimeout(this.timeout),delete this.timeout),this.before=this._loop(a-1),this.current=a,this.after=this._loop(a+1),this._update())},a.prototype._update=function(){for(var a=" is-before ",b=" is-current ",c=" is-after ",d=/is\-before|is\-current|is\-after/g,e=0,f=this.frames.length;f>e;e++)this.frames[e].className=this.frames[e].className.replace(d,"");this.frames[this.before].className+=a,this.frames[this.current].className+=b,this.frames[this.after].className+=c,!this.transitionEnd&&this.timeout&&this._autoplay()},a.prototype.teardown=function(){this.target.removeChild(this.linkNext),this.target.removeChild(this.linkPrev),this.transitionEnd&&this.target.removeEventListener(this.transitionEnd,this.transitionEndHandler),this.timeout&&(clearTimeout(this.timeout),delete this.timeout),delete this.after,delete this.before,delete this.current,delete this.linkNext,delete this.linkPrev,delete this.transitionEnd,delete this.transitionEndHandler},a});